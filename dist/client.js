"use strict";let socket;var outputDiv=document.getElementById("output"),cpus=document.getElementById("cpus"),freq=document.getElementById("freq"),nameInput=document.getElementById("name"),ide=document.getElementById("ide"),canvas=document.getElementById("main"),ctx=canvas.getContext("2d");ctx.translate(.5,.5);var colors=["#882000","#68d0a8","#a838a0","#50b818","#181090","#f0e858","#a04800","#472b1b","#c87870","#98ff98","#5090d0"],engine={robots:[],width:canvas.width,height:canvas.height,init:function(){clearDebug(),clearOutput()},draw:function(){ctx.clearRect(0,0,canvas.width,canvas.height);for(var t=0;t<this.robots.length;t++){var e=this.robots[t],o=t;o>colors.length-1&&(o%=colors.length),ctx.lineWidth=3,ctx.strokeStyle=colors[o],ctx.beginPath(),ctx.arc(e.x,e.y,e.size,0,2*Math.PI),ctx.stroke(),ctx.strokeStyle="white";var n=e.x+(e.size+2)*Math.sin(e.direction*Math.PI/180),c=e.y+(e.size+2)*Math.cos(e.direction*Math.PI/180);ctx.beginPath(),ctx.moveTo(e.x,e.y),ctx.lineTo(n,c),ctx.stroke(),ctx.strokeStyle="black",n=e.x+(e.size+4)*Math.sin(e.turretDir*Math.PI/180),c=e.y+(e.size+4)*Math.cos(e.turretDir*Math.PI/180),ctx.beginPath(),ctx.moveTo(e.x,e.y),ctx.lineTo(n,c),ctx.stroke(),ctx.font="8px retroFont",ctx.fillStyle="white",ctx.fillText(e.name+" : "+e.energy,e.x-e.size,e.y-e.size-5)}}};function run(){socket.emit("start")}function addRobot(){socket.emit("addRobot",ide.value,cpus.value,freq.value,nameInput.value)}function clearRoom(){socket.emit("clear")}function stopProgram(){socket.emit("stop")}function closeInstructions(){document.getElementById("instructions").style.display="none"}function openInstructions(){document.getElementById("instructions").style.display="block"}function errorOff(t){addToOutput("Runtime error on line "+t)}function clearDebug(){debugDiv.innerHTML=""}function clearOutput(){outputDiv.innerHTML=""}function addToOutput(t){var e=outputDiv.innerHTML;e=e.replace('style="color:green"',""),outputDiv.innerHTML="",outputDiv.innerHTML+="<span style='color:green'>"+t+"</span>",outputDiv.innerHTML+="</br>",outputDiv.innerHTML+=e}function addToDebug(t){debugDiv.innerHTML+="</br>",debugDiv.innerHTML+=t}function createRoom(){var t=document.getElementById("roomName").value;""!==t?socket.emit("createRoom",t,!1):alert("Please provide a room name.")}function joinRoom(t){""!==t&&(socket.emit("enterRoom",t),console.log(t))}function leaveRoom(){socket.emit("leaveRoom")}function bind(){socket.on("connect",()=>{}),socket.on("disconnect",()=>{}),socket.on("error",()=>{}),socket.on("message",t=>{addToOutput(t)}),socket.on("createdRoom",t=>{console.log(t),socket.emit("enterRoom",t)}),socket.on("enteredRoom",t=>{console.log("Entered",t),document.getElementById("notInRoom").style.display="none",document.getElementById("inRoom").style.display="block"}),socket.on("leftRoom",t=>{document.getElementById("notInRoom").style.display="block",document.getElementById("inRoom").style.display="none"}),socket.on("update",t=>{engine.robots=t,engine.draw()}),socket.on("shoot",(t,e)=>{addToOutput(t+" shot "+e)}),socket.on("alert",t=>{alert(t)}),socket.on("availableRooms",t=>{var e=document.getElementById("rooms");for(var o in e.innerHTML="<tr><th>Name</th><th>Number of Users</th><th></th></tr>",0===t.length&&(e.innerHTML+="<tr><td colspan='3'> Data Unavailable.</td></tr>"),t){var n=t[o];e.innerHTML+="<tr><td>"+n.name+"</td><td>"+n.numUsers+"</td><td>   <button onclick='joinRoom(\""+n.name+"\")'>join</button></td></tr>"}})}function init(){socket=io({upgrade:!1,transports:["websocket"]}),bind()}window.addEventListener("load",init,!1);